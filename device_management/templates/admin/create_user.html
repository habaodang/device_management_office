{% extends "admin/base_admin.html" %}
{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin/create_user.css') }}">
{% endblock %}
{% block content %}

<section id="createUser" class="section">
    <h2>Tạo Tài Khoản</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="error-message">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <form method="post" action="{{ url_for('admin_route.admin_add_user')}}">

        <label>Tên tài khoản:</label>
        <input type="text" placeholder="Username" name="user_name" required>

        <label>Password:</label>
        <input type="password" name="password" id="password" placeholder="Nhập mật khẩu" required>

        <label>Xác nhận Password:</label>
        <input type="password" name="cmpassword" id="cmpassword" placeholder="Nhập lại mật khẩu" required>

        <div class="switch-container">
            <label class="switch">
                <input type="checkbox" id="showPassword" onclick="togglePasswordVisibility()">
                <span class="slider round"></span>
            </label>
            <span class="switch-label">Hiện mật khẩu</span>
        </div>

        <label>Role:</label>
        <select name="role">
            {% for role in roles %}
            <option value="{{ role.stt }}">{{ role.name }}</option>
            {% endfor %}
        </select>

        <button type="submit">Tạo tài khoản</button>
    </form>
</section>

<script>
    function togglePasswordVisibility() {
        const passwordInput = document.getElementById('password');
        const cmpasswordInput = document.getElementById('cmpassword');
        const showPasswordCheckbox = document.getElementById('showPassword');

        if (showPasswordCheckbox.checked) {
            passwordInput.type = "text";
            cmpasswordInput.type = "text";
        } else {
            passwordInput.type = "password";
            cmpasswordInput.type = "password";
        }
    }
</script>

{% endblock %}
